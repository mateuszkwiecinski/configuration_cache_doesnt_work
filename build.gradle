import java.awt.Color
import javax.inject.Inject

abstract class GreetingTask extends DefaultTask {

    @Input
    ListProperty<SomeClass> filters

    @Inject
    GreetingTask(ObjectFactory objectFactory) {
        filters = objectFactory.listProperty(SomeClass.class);
    }

    @TaskAction
    def greet() {
        println "filters=${filters.get()}"
    }
}

class SomeClass implements Serializable {

    private final Color color;

    SomeClass(Color color) {
        this.color = color;
    }

    @Override
    public String toString() {
        return "SomeClass{" +
                "color=" + color +
                '}';
    }
}

// Create a task using the task type
tasks.register('repro', GreetingTask) {
    filters = [new SomeClass(Color.RED)]
}